<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>To-Do List con JSF y PrimeFaces</title>
</h:head>
<h:body>
    <h:form id="taskForm">
        <!-- Growl para notificaciones dinÃ¡micas -->
        <p:growl id="growl" showDetail="true" life="3000" />

        <!-- Panel para agregar nueva tarea -->
        <p:panel header="Agregar Tarea">
            <p:inputText id="newTaskInput" value="#{taskController.newTaskDescription}" placeholder="Nueva tarea"/>
            <p:commandButton value="Agregar"
                             action="#{taskController.addTask}"
                             update=":taskForm:tasksTable :taskForm:growl"/>
        </p:panel>

        <!-- Tabla de tareas -->
        <p:dataTable id="tasksTable" var="task" value="#{taskController.tasks}">
            <p:column headerText="Tarea">
                <h:outputText value="#{task.description}"
                              style="#{task.completed ? 'text-decoration: line-through;' : ''}"/>
            </p:column>

            <p:column headerText="Completada">
                <p:commandButton value="#{task.completed ? 'Desmarcar' : 'Completar'}"
                                 action="#{taskController.toggleCompleted(task)}"
                                 update=":taskForm:tasksTable :taskForm:growl"/>
            </p:column>

            <p:column headerText="Eliminar">
                <p:commandButton value="Eliminar"
                                 action="#{taskController.removeTask(task)}"
                                 update=":taskForm:tasksTable :taskForm:growl"/>
            </p:column>
        </p:dataTable>
    </h:form>
</h:body>
</html>
